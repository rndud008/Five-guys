<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lec.spring.repository.TravelPostRepository">
    <insert id="save" flushCache="true" parameterType="com.lec.spring.domain.TravelPost"
        useGeneratedKeys="true" keyColumn="id" keyProperty="id">
        insert into travel_post
        (
         travel_type_id, areacode, title, addr1, addr2, contentid, firstimage, firstimage2,
         cpyrhtDivCd, mapx, mapy, modifiedtime, tel, eventstartdate, eventenddate, infocenter,
         parking, restdate, usetime, homepage, overview, eventplace, playtime, usetimefestival,
         infoname, infotext
        )
        values
        (
         #{travelType.id}, #{areacode.areacode}, #{title}, #{addr1}, #{addr2}, #{contentid}, #{firstimage},
         #{firstimage2}, #{cpyrhtDivCd}, #{mapx}, #{mapy}, #{modifiedtime}, #{tel}, #{eventstartdate},
         #{eventenddate}, #{infocenter}, #{parking}, #{restdate}, #{usetime}, #{homepage}, #{overview}, #{eventplace},
         #{playtime}, #{usetimefestival}, #{infoname}, #{infotext}
        )
    </insert>

    <select id="findByContentIdAndType" resultType="com.lec.spring.domain.TravelPost">
        select *
        FROM travel_post
        where contentid = #{contentid}
        AND travel_type_id = #{travelType.id}
    </select>

</mapper>